const we="growi-plugin-script-template",_e="1.0.0",je="GROWI plugin template for script",Re="MIT",Ee=["growi","growi-plugin"],Se="module",ke={dev:"vite",build:"tsc && vite build",preview:"vite preview"},Ce={"@vanillaes/csv":"^3.0.4",react:"^18.3.1","react-async":"^10.0.1","react-dom":"^18.3.1","react-innertext":"^1.1.5"},Fe={"@types/react":"^18.3.3","@types/react-dom":"^18.3.0","@typescript-eslint/eslint-plugin":"^5.0.0","@typescript-eslint/parser":"^5.0.0","@vitejs/plugin-react":"^4.3.1",eslint:"^8.18.0","eslint-config-next":"^14.2.4","eslint-config-weseek":"^2.1.0","eslint-import-resolver-typescript":"^3.2.5","eslint-plugin-import":"^2.29.1","eslint-plugin-jest":"^27.1.0","eslint-plugin-react":"^7.30.1","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-regex":"^1.10.0",jest:"^29.7.0",typescript:"^5.5.2",vite:"^5.3.2"},Pe={schemaVersion:"4",types:["script"]},$e={name:we,version:_e,description:je,license:Re,keywords:Ee,type:Se,scripts:ke,dependencies:Ce,devDependencies:Fe,growiPlugin:Pe};function Ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var te={exports:{}},N={},re={exports:{}},u={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $=Symbol.for("react.element"),Oe=Symbol.for("react.portal"),xe=Symbol.for("react.fragment"),Ie=Symbol.for("react.strict_mode"),De=Symbol.for("react.profiler"),Le=Symbol.for("react.provider"),Te=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Ve=Symbol.for("react.memo"),qe=Symbol.for("react.lazy"),K=Symbol.iterator;function Ue(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oe=Object.assign,se={};function S(e,t,r){this.props=e,this.context=t,this.refs=se,this.updater=r||ne}S.prototype.isReactComponent={};S.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ie(){}ie.prototype=S.prototype;function U(e,t,r){this.props=e,this.context=t,this.refs=se,this.updater=r||ne}var G=U.prototype=new ie;G.constructor=U;oe(G,S.prototype);G.isPureReactComponent=!0;var Q=Array.isArray,ce=Object.prototype.hasOwnProperty,W={current:null},le={key:!0,ref:!0,__self:!0,__source:!0};function ue(e,t,r){var n,c={},a=null,f=null;if(t!=null)for(n in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(a=""+t.key),t)ce.call(t,n)&&!le.hasOwnProperty(n)&&(c[n]=t[n]);var l=arguments.length-2;if(l===1)c.children=r;else if(1<l){for(var i=Array(l),y=0;y<l;y++)i[y]=arguments[y+2];c.children=i}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)c[n]===void 0&&(c[n]=l[n]);return{$$typeof:$,type:e,key:a,ref:f,props:c,_owner:W.current}}function Ge(e,t){return{$$typeof:$,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function B(e){return typeof e=="object"&&e!==null&&e.$$typeof===$}function We(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var X=/\/+/g;function V(e,t){return typeof e=="object"&&e!==null&&e.key!=null?We(""+e.key):t.toString(36)}function D(e,t,r,n,c){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(a){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case $:case Oe:f=!0}}if(f)return f=e,c=c(f),e=n===""?"."+V(f,0):n,Q(c)?(r="",e!=null&&(r=e.replace(X,"$&/")+"/"),D(c,t,r,"",function(y){return y})):c!=null&&(B(c)&&(c=Ge(c,r+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(X,"$&/")+"/")+e)),t.push(c)),1;if(f=0,n=n===""?".":n+":",Q(e))for(var l=0;l<e.length;l++){a=e[l];var i=n+V(a,l);f+=D(a,t,r,i,c)}else if(i=Ue(e),typeof i=="function")for(e=i.call(e),l=0;!(a=e.next()).done;)a=a.value,i=n+V(a,l++),f+=D(a,t,r,i,c);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function x(e,t,r){if(e==null)return e;var n=[],c=0;return D(e,n,"","",function(a){return t.call(r,a,c++)}),n}function Be(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var g={current:null},L={transition:null},Ye={ReactCurrentDispatcher:g,ReactCurrentBatchConfig:L,ReactCurrentOwner:W};function ae(){throw Error("act(...) is not supported in production builds of React.")}u.Children={map:x,forEach:function(e,t,r){x(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return x(e,function(){t++}),t},toArray:function(e){return x(e,function(t){return t})||[]},only:function(e){if(!B(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};u.Component=S;u.Fragment=xe;u.Profiler=De;u.PureComponent=U;u.StrictMode=Ie;u.Suspense=Me;u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ye;u.act=ae;u.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=oe({},e.props),c=e.key,a=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,f=W.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(i in t)ce.call(t,i)&&!le.hasOwnProperty(i)&&(n[i]=t[i]===void 0&&l!==void 0?l[i]:t[i])}var i=arguments.length-2;if(i===1)n.children=r;else if(1<i){l=Array(i);for(var y=0;y<i;y++)l[y]=arguments[y+2];n.children=l}return{$$typeof:$,type:e.type,key:c,ref:a,props:n,_owner:f}};u.createContext=function(e){return e={$$typeof:Te,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Le,_context:e},e.Consumer=e};u.createElement=ue;u.createFactory=function(e){var t=ue.bind(null,e);return t.type=e,t};u.createRef=function(){return{current:null}};u.forwardRef=function(e){return{$$typeof:Ne,render:e}};u.isValidElement=B;u.lazy=function(e){return{$$typeof:qe,_payload:{_status:-1,_result:e},_init:Be}};u.memo=function(e,t){return{$$typeof:Ve,type:e,compare:t===void 0?null:t}};u.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}};u.unstable_act=ae;u.useCallback=function(e,t){return g.current.useCallback(e,t)};u.useContext=function(e){return g.current.useContext(e)};u.useDebugValue=function(){};u.useDeferredValue=function(e){return g.current.useDeferredValue(e)};u.useEffect=function(e,t){return g.current.useEffect(e,t)};u.useId=function(){return g.current.useId()};u.useImperativeHandle=function(e,t,r){return g.current.useImperativeHandle(e,t,r)};u.useInsertionEffect=function(e,t){return g.current.useInsertionEffect(e,t)};u.useLayoutEffect=function(e,t){return g.current.useLayoutEffect(e,t)};u.useMemo=function(e,t){return g.current.useMemo(e,t)};u.useReducer=function(e,t,r){return g.current.useReducer(e,t,r)};u.useRef=function(e){return g.current.useRef(e)};u.useState=function(e){return g.current.useState(e)};u.useSyncExternalStore=function(e,t,r){return g.current.useSyncExternalStore(e,t,r)};u.useTransition=function(){return g.current.useTransition()};u.version="18.3.1";re.exports=u;var fe=re.exports;const d=Ae(fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ze=fe,He=Symbol.for("react.element"),Je=Symbol.for("react.fragment"),Ke=Object.prototype.hasOwnProperty,Qe=ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xe={key:!0,ref:!0,__self:!0,__source:!0};function de(e,t,r){var n,c={},a=null,f=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(f=t.ref);for(n in t)Ke.call(t,n)&&!Xe.hasOwnProperty(n)&&(c[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)c[n]===void 0&&(c[n]=t[n]);return{$$typeof:He,type:e,key:a,ref:f,props:c,_owner:Qe.current}}N.Fragment=Je;N.jsx=de;N.jsxs=de;te.exports=N;var b=te.exports;function Ze(e,t,r=n=>n){const n=Object.create(null);n.options={},n.reviver=r,n.value="",n.entry=[],n.output=[],n.col=1,n.row=1;const c=/"|,|\r\n|\n|\r|[^",\r\n]+/y,a=/^(\r\n|\n|\r)$/;let f=[],l="",i=0;for(;(f=c.exec(e))!==null;)switch(l=f[0],i){case 0:switch(!0){case l==='"':i=3;break;case l===",":i=0,j(n);break;case a.test(l):i=0,j(n),I(n);break;default:n.value+=l,i=2;break}break;case 2:switch(!0){case l===",":i=0,j(n);break;case a.test(l):i=0,j(n),I(n);break;default:throw i=4,Error(`CSVError: Illegal state [row:${n.row}, col:${n.col}]`)}break;case 3:switch(!0){case l==='"':i=4;break;default:i=3,n.value+=l;break}break;case 4:switch(!0){case l==='"':i=3,n.value+=l;break;case l===",":i=0,j(n);break;case a.test(l):i=0,j(n),I(n);break;default:throw Error(`CSVError: Illegal state [row:${n.row}, col:${n.col}]`)}break}return n.entry.length!==0&&(j(n),I(n)),n.output}function j(e){const t=e.options.typed?et(e.value):e.value;e.entry.push(e.reviver(t,e.row,e.col)),e.value="",e.col++}function I(e){e.output.push(e.entry),e.entry=[],e.row++,e.col=1}function et(e){const t=/.\./;switch(!0){case e==="true":case e==="false":return e==="true";case t.test(e):return parseFloat(e);case isFinite(e):return parseInt(e);default:return e}}const P=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global||typeof global=="object"&&global.GLOBAL===global?global:{};P.__REACT_ASYNC__=P.__REACT_ASYNC__||{};const tt=()=>{};class rt{constructor(){this.abort=tt,this.signal={}}}let s;try{s=require("prop-types")}catch{}const E=s&&s.oneOfType([s.node,s.func]),C=s&&s.shape({initialValue:s.any,data:s.any,error:s.instanceOf(Error),value:s.any,startedAt:s.instanceOf(Date),finishedAt:s.instanceOf(Date),status:s.oneOf(["initial","pending","fulfilled","rejected"]),isInitial:s.bool,isPending:s.bool,isLoading:s.bool,isFulfilled:s.bool,isResolved:s.bool,isRejected:s.bool,isSettled:s.bool,counter:s.number,promise:s.instanceOf(Promise),run:s.func,reload:s.func,cancel:s.func,setData:s.func,setError:s.func});var _=s&&{Async:{children:E,promise:s.instanceOf(Promise),promiseFn:s.func,deferFn:s.func,watch:s.any,watchFn:s.func,initialValue:s.any,onResolve:s.func,onReject:s.func,reducer:s.func,dispatcher:s.func,debugLabel:s.string,suspense:s.bool},Initial:{children:E,state:C.isRequired,persist:s.bool},Pending:{children:E,state:C.isRequired,initial:s.bool},Fulfilled:{children:E,state:C.isRequired,persist:s.bool},Rejected:{children:E,state:C.isRequired,persist:s.bool},Settled:{children:E,state:C.isRequired,persist:s.bool}};const A=(e,...t)=>typeof e=="function"?e(...t):e,pe=({children:e,persist:t,state:r={}})=>d.createElement(d.Fragment,null,r.isInitial||t&&!r.data?A(e,r):null),he=({children:e,initial:t,state:r={}})=>d.createElement(d.Fragment,null,r.isPending&&(!t||!r.value)?A(e,r):null),me=({children:e,persist:t,state:r={}})=>d.createElement(d.Fragment,null,r.isFulfilled||t&&r.data?A(e,r.data,r):null),ye=({children:e,persist:t,state:r={}})=>d.createElement(d.Fragment,null,r.isRejected||t&&r.error?A(e,r.error,r):null),be=({children:e,persist:t,state:r={}})=>d.createElement(d.Fragment,null,r.isSettled||t&&r.value?A(e,r):null);_&&(pe.propTypes=_.Initial,he.propTypes=_.Pending,me.propTypes=_.Fulfilled,ye.propTypes=_.Rejected,be.propTypes=_.Settled);var h;(function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"})(h||(h={}));const nt=(e,t)=>e instanceof Error?h.rejected:e!==void 0?h.fulfilled:t?h.pending:h.initial,ot=e=>e instanceof Error?h.rejected:e!==void 0?h.fulfilled:h.initial,F=e=>({status:e,isInitial:e===h.initial,isPending:e===h.pending,isLoading:e===h.pending,isFulfilled:e===h.fulfilled,isResolved:e===h.fulfilled,isRejected:e===h.rejected,isSettled:e===h.fulfilled||e===h.rejected}),T=function(){};Object.setPrototypeOf?Object.setPrototypeOf(T,Promise):T.__proto__=Promise;T.prototype=Object.assign(Object.create(Promise.prototype),{finally(){return this},catch(){return this},then(){return this}});const q=new T;var w;(function(e){e.start="start",e.cancel="cancel",e.fulfill="fulfill",e.reject="reject"})(w||(w={}));const st=({initialValue:e,promise:t,promiseFn:r})=>({initialValue:e,data:e instanceof Error?void 0:e,error:e instanceof Error?e:void 0,value:e,startedAt:t||r?new Date:void 0,finishedAt:e?new Date:void 0,...F(nt(e,t||r)),counter:0,promise:q}),Z=(e,t)=>{switch(t.type){case w.start:return{...e,startedAt:new Date,finishedAt:void 0,...F(h.pending),counter:t.meta.counter,promise:t.meta.promise};case w.cancel:return{...e,startedAt:void 0,finishedAt:void 0,...F(ot(e.error||e.data)),counter:t.meta.counter,promise:t.meta.promise};case w.fulfill:return{...e,data:t.payload,value:t.payload,error:void 0,finishedAt:new Date,...F(h.fulfilled),promise:t.meta.promise};case w.reject:return{...e,error:t.payload,value:t.payload,finishedAt:new Date,...F(h.rejected),promise:t.meta.promise};default:return e}},it=e=>(t,...r)=>{e(t,...r),t.type===w.start&&typeof t.payload=="function"&&t.payload()};class dt extends d.Component{}function ct(e={},t="Async"){const{Consumer:r,Provider:n}=d.createContext(void 0);function c({children:v}){return d.createElement(r,null,o=>{if(!o)throw new Error("this component should only be used within an associated <Async> component!");return v(o)})}class a extends d.Component{constructor(o){super(o),this.mounted=!1,this.counter=0,this.args=[],this.promise=q,this.abortController=new rt,this.start=this.start.bind(this),this.load=this.load.bind(this),this.run=this.run.bind(this),this.cancel=this.cancel.bind(this),this.onResolve=this.onResolve.bind(this),this.onReject=this.onReject.bind(this),this.setData=this.setData.bind(this),this.setError=this.setError.bind(this);const p=o.promise,m=o.promiseFn||e.promiseFn,R=o.initialValue||e.initialValue;this.state={...st({initialValue:R,promise:p,promiseFn:m}),cancel:this.cancel,run:this.run,reload:()=>{this.load(),this.run(...this.args)},setData:this.setData,setError:this.setError},this.debugLabel=o.debugLabel||e.debugLabel;const{devToolsDispatcher:O}=P.__REACT_ASYNC__,z=o.reducer||e.reducer,H=o.dispatcher||e.dispatcher||O,ge=z?(k,M)=>z(k,M,Z):Z,J=it((k,M)=>{this.setState(ve=>ge(ve,k),M)});this.dispatch=H?k=>H(k,J,o):J}componentDidMount(){this.mounted=!0,(this.props.promise||!this.state.initialValue)&&this.load()}componentDidUpdate(o){const{watch:p,watchFn:m=e.watchFn,promise:R,promiseFn:O}=this.props;if(p!==o.watch)return this.counter&&this.cancel(),this.load();if(m&&m({...e,...this.props},{...e,...o}))return this.counter&&this.cancel(),this.load();if(R!==o.promise&&(this.counter&&this.cancel(),R))return this.load();if(O!==o.promiseFn&&(this.counter&&this.cancel(),O))return this.load()}componentWillUnmount(){this.cancel(),this.mounted=!1}getMeta(o){return{counter:this.counter,promise:this.promise,debugLabel:this.debugLabel,...o}}start(o){return"AbortController"in P&&(this.abortController.abort(),this.abortController=new P.AbortController),this.counter++,this.promise=new Promise((p,m)=>{if(!this.mounted)return;const R=()=>o().then(p,m);this.dispatch({type:w.start,payload:R,meta:this.getMeta()})})}load(){const o=this.props.promise,p=this.props.promiseFn||e.promiseFn;if(o)this.start(()=>o).then(this.onResolve(this.counter)).catch(this.onReject(this.counter));else if(p){const m={...e,...this.props};this.start(()=>p(m,this.abortController)).then(this.onResolve(this.counter)).catch(this.onReject(this.counter))}}run(...o){const p=this.props.deferFn||e.deferFn;if(p){this.args=o;const m={...e,...this.props};return this.start(()=>p(o,m,this.abortController)).then(this.onResolve(this.counter),this.onReject(this.counter))}}cancel(){const o=this.props.onCancel||e.onCancel;o&&o(),this.counter++,this.abortController.abort(),this.mounted&&this.dispatch({type:w.cancel,meta:this.getMeta()})}onResolve(o){return p=>{if(this.counter===o){const m=this.props.onResolve||e.onResolve;this.setData(p,()=>m&&m(p))}return p}}onReject(o){return p=>{if(this.counter===o){const m=this.props.onReject||e.onReject;this.setError(p,()=>m&&m(p))}return p}}setData(o,p){return this.mounted&&this.dispatch({type:w.fulfill,payload:o,meta:this.getMeta()},p),o}setError(o,p){return this.mounted&&this.dispatch({type:w.reject,payload:o,error:!0,meta:this.getMeta()},p),o}render(){const{children:o,suspense:p}=this.props;if(p&&this.state.isPending&&this.promise!==q)throw this.promise;if(typeof o=="function"){const m=o;return d.createElement(n,{value:this.state},m(this.state))}return o!=null?d.createElement(n,{value:this.state},o):null}}_&&(a.propTypes=_.Async);const f=v=>d.createElement(c,null,o=>d.createElement(pe,Object.assign({},v,{state:o}))),l=v=>d.createElement(c,null,o=>d.createElement(he,Object.assign({},v,{state:o}))),i=v=>d.createElement(c,null,o=>d.createElement(me,Object.assign({},v,{state:o}))),y=v=>d.createElement(c,null,o=>d.createElement(ye,Object.assign({},v,{state:o}))),Y=v=>d.createElement(c,null,o=>d.createElement(be,Object.assign({},v,{state:o})));return f.displayName=`${t}.Initial`,l.displayName=`${t}.Pending`,i.displayName=`${t}.Fulfilled`,y.displayName=`${t}.Rejected`,Y.displayName=`${t}.Settled`,Object.assign(a,{displayName:t,Initial:f,Pending:l,Loading:l,Fulfilled:i,Resolved:i,Rejected:y,Settled:Y})}var lt=ct();const ut=async({filePath:e},{signal:t})=>{const n=await(await fetch(e,{signal:t})).text();return Ze(n)},ee=e=>({children:t,...r})=>{const{attachmentName:n,url:c}=r;if(!n.endsWith(".csv"))return b.jsx(e,{...r,children:t});try{return b.jsxs(b.Fragment,{children:[b.jsxs("strong",{children:["Preview: ",n]}),b.jsx(lt,{promiseFn:ut,filePath:c,children:({data:a,error:f,isPending:l})=>l?"Loading...":f?`Something went wrong: ${f.message}`:a?b.jsxs(b.Fragment,{children:[b.jsxs("table",{className:"table",children:[b.jsx("thead",{children:b.jsx("tr",{children:a[0].map(i=>b.jsx("td",{children:i}))})}),b.jsx("tbody",{children:a.slice(1).map(i=>b.jsx("tr",{children:i.map(y=>b.jsx("td",{children:y}))}))})]}),b.jsx(e,{...r,children:t})]}):null})]})}catch{}return b.jsx(e,{...r,children:t})},at=()=>{if(growiFacade==null||growiFacade.markdownRenderer==null)return;const{optionsGenerators:e}=growiFacade.markdownRenderer;e.customGenerateViewOptions=(...t)=>{const r=e.generateViewOptions(...t),{attachment:n}=r.components;return r.components.attachment=ee(n),r},e.customGeneratePreviewOptions=(...t)=>{const r=e.generatePreviewOptions(...t),{attachment:n}=r.components;return r.components.attachment=ee(n),r}},ft=()=>{};window.pluginActivators==null&&(window.pluginActivators={});window.pluginActivators[$e.name]={activate:at,deactivate:ft};
